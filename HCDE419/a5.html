<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, maximum-scale=1.0" />
    <link rel="stylesheet" href="prism.css">
    <script defer src="prism.js"></script>
    
    <title>A5: High(er) voltage and transistors!</title>

    <link href="style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <h1>A5: High(er) voltage and transistors!</h1>
    <div class="header">
      <img src="Images/A5 Result.gif" />
      <p>Here is all the documentation for A5: High(er) voltage and transistors!
        This was the result.
        <br>
        <br>
        A string of LEDs that turn on when I discharge the
        capacitive sensor with my touch.
      </p>
    </div>
  </body>
</html>

<div class="grid">
  <div class="element">
    <h2>Circuit Design</h2>
    <img src="Images/A5 Circuit.png" />
    <p>
      Description
    </p>
  </div>

  <div class="element">
      <h2>Schematic</h2>
      <img src="Images/A5 Schematic.png" />
      <p>
        Description
      </p>
  </div>
</div>

<div> 
  <h2>Code Snippet</h2>
  <div class="container">
      <div class="box">
        <pre> 
          <code class="language-arduino">
            #include <CapacitiveSensor.h>

              /*
               * CapitiveSense Library Demo Sketch
               * Paul Badger 2008
               * Uses a high value resistor e.g. 10M between send pin and receive pin
               * Resistor effects sensitivity, experiment with values, 50K - 50M. Larger resistor values yield larger sensor values.
               * Receive pin is the sensor pin - try different amounts of foil/metal on this pin
               */
              
              CapacitiveSensor   cs_8_7 = CapacitiveSensor(8,7);   // 1M resistor between pins 8 & 7, pin 7 is sensor pin, add a wire and or foil if desired
              const int led = 3;    // assign the pin for the MOSFET gate controlling the led string
              
              void setup()                    
              {
                 cs_8_7.set_CS_AutocaL_Millis(0xFFFFFFFF);     // turn off autocalibrate on channel 1 - just as an example
                 Serial.begin(9600);
              }
              
              void loop()                    
              {
                  long total1 =  cs_8_7.capacitiveSensor(30);   // initialize variable for cpacitive sensor and read sensor to assign value
                  total1 = constrain(total1, 0, 30);            // constrain to control for spikes in readings
              
                  Serial.println(total1); // print sensor output 1
              
                  if (total1 < 22){     // if below calibration point...
                    analogWrite(led, 200);    // turn led string on to specific brightness value
                  }
                  else{
                    analogWrite(led, 0);  // else turn led off
                  }
              
                  delay(50);  // arbitrary delay to limit data to serial port 
              }
          </code>
        </pre>
      </div>
  </div>
</div>

<div>
  <h2>Homework Questions</h2>
  <div class="container">
      <div class="box">
        <p>
          <b>
            1: This is the datasheet for the n-mosfet 
            transistor: https://www.diodes.com/assets/Datasheets/DMT6009LCT.pdf 
            What is the absolute maximum amount of 
            current between pins 2 and 3?
          </b>
        </p>
        <p>
          80 amps
        </p>
          <b>
            2: Draw a schematic for a circuit 
            using at least your arduino, a DC motor, 
            a flyback diode, and capacitors between 
            power and ground. Find parts with 
            datasheets you could use for each of 
            these schematic components.
          </b>
        </p>
        <img src="Images/A5 Q2.jpeg"/>
        <p> 
          <b>
            3: Here is the datasheet for the L293D chip: 
            https://www.ti.com/product/L293D
            Draw a schematic using at 
            least your arduino, this chip, and two motors.
            Write (pseudo) code that shows how you would 
            move the motors both forward, both back, then 
            one forward one back, and one back then forward.
          </b>
        </p>
        <img src="Images/A5 Q3.jpeg"/>
          <div class="container">
              <div class="box">
                <pre> 
                  <code class="language-arduino">
                    // Define the pins connected to the L293D motor driver
                    int motorPin1 = 2; // Connect to Pin 2 of the Arduino
                    int motorPin2 = 3; // Connect to Pin 3 of the Arduino
                    int enablePin = 9; // Connect to Pin 9 of the Arduino

                    void setup() {
                      // Set the motor control pins as outputs
                      pinMode(motorPin1, OUTPUT);
                      pinMode(motorPin2, OUTPUT);
                      pinMode(enablePin, OUTPUT);
                    }

                    void loop() {
                      // Move both motors forward
                      moveForward();
                      delay(2000); // 2 second delay for flyback

                      // Move both motors backward
                      moveBackward();
                      delay(2000); // 2 second delay for flyback

                      // Move one motor forward and the other backward
                      moveOneForwardOneBackward();
                      delay(2000); // 2 second delay for flyback

                      // Move one motor backward and the other forward
                      moveOneBackwardOneForward();
                      delay(2000); // 2 second delay for flyback
                    }

                    void moveForward() {
                      digitalWrite(motorPin1, HIGH); // Set motor 1 direction to forward
                      digitalWrite(motorPin2, HIGH); // Set motor 2 direction to forward
                      analogWrite(enablePin, 255); // Set motor speed to maximum
                    }

                    void moveBackward() {
                      digitalWrite(motorPin1, LOW); // Set motor 1 direction to backward
                      digitalWrite(motorPin2, LOW); // Set motor 2 direction to backward
                      analogWrite(enablePin, 255); // Set motor speed to maximum
                    }

                    void moveOneForwardOneBackward() {
                      digitalWrite(motorPin1, HIGH); // Set motor 1 direction to forward
                      digitalWrite(motorPin2, LOW); // Set motor 2 direction to backward
                      analogWrite(enablePin, 255); // Set motor speed to maximum
                    }

                    void moveOneBackwardOneForward() {
                      digitalWrite(motorPin1, LOW); // Set motor 1 direction to backward
                      digitalWrite(motorPin2, HIGH); // Set motor 2 direction to forward
                      analogWrite(enablePin, 255); // Set motor speed to maximum
                    }
                  </code>
                </pre>
              </div>
          </div>
      </div>
    </div>
</div>